<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Yvesypher - Lecture 8: Clearly communicating with code</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../assets/all.css">
</head>

<body class="nav-sidebar docked nav-fixed slimcontent">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Yvesypher</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-etc5523" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">ETC5523</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-etc5523">    
        <li class="dropdown-header">2023S2 Etc5523</li>
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-01.html" rel="" target="">
 <span class="dropdown-text">Lecture 1: Basic communication theory and practice</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-02.html" rel="" target="">
 <span class="dropdown-text">Lecture 2: Introduction to web technologies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-03.html" rel="" target="">
 <span class="dropdown-text">Lecture 3: Communicating data with interactive web apps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-04.html" rel="" target="">
 <span class="dropdown-text">Lecture 4: Data storytelling on the web</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-05A.html" rel="" target="">
 <span class="dropdown-text">Lecture 5A: Statistical model outputs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-05B.html" rel="" target="">
 <span class="dropdown-text">Lecture 5B: Data tables</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-06.html" rel="" target="">
 <span class="dropdown-text">Lecture 6: Effective data visualisation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-07.html" rel="" target="">
 <span class="dropdown-text">Lecture 7: Captivating statistical presentations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-08.html" rel="" target="">
 <span class="dropdown-text">Lecture 8: Clearly communicating with code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-09.html" rel="" target="">
 <span class="dropdown-text">Lecture 9: Stylishly communicating with code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/lecture-10.html" rel="" target="">
 <span class="dropdown-text">Lecture 10: Narrative</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../2023S2-etc5523/practice-questions.html" rel="" target="">
 <span class="dropdown-text">Practice Questions</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../2023S2-etc5523/lecture-01.html">2023S2 Etc5523</a></li><li class="breadcrumb-item"><a href="../2023S2-etc5523/lecture-08.html">Lecture 8: Clearly communicating with code</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">2023S2 Etc5523</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 1: Basic communication theory and practice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 2: Introduction to web technologies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3: Communicating data with interactive web apps</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 4: Data storytelling on the web</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-05A.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 5A: Statistical model outputs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-05B.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 5B: Data tables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 6: Effective data visualisation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 7: Captivating statistical presentations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-08.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Lecture 8: Clearly communicating with code</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 9: Stylishly communicating with code</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/lecture-10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 10: Narrative</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../2023S2-etc5523/practice-questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practice Questions</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#aim" id="toc-aim" class="nav-link active" data-scroll-target="#aim"></a></li>
  <li><a href="#example-data" id="toc-example-data" class="nav-link" data-scroll-target="#example-data">Example data</a></li>
  <li><a href="#which-one-do-you-prefer" id="toc-which-one-do-you-prefer" class="nav-link" data-scroll-target="#which-one-do-you-prefer">Which one do you prefer?</a></li>
  <li><a href="#what-do-you-expect-the-output-is" id="toc-what-do-you-expect-the-output-is" class="nav-link" data-scroll-target="#what-do-you-expect-the-output-is">What do you expect the output is?</a></li>
  <li><a href="#naming-matters" id="toc-naming-matters" class="nav-link" data-scroll-target="#naming-matters">Naming matters</a>
  <ul class="collapse">
  <li><a href="#syntactic-sugar" id="toc-syntactic-sugar" class="nav-link" data-scroll-target="#syntactic-sugar">Syntactic sugar</a></li>
  <li><a href="#naming-cases" id="toc-naming-cases" class="nav-link" data-scroll-target="#naming-cases">Naming cases</a></li>
  <li><a href="#syntactically-valid-names-in-r" id="toc-syntactically-valid-names-in-r" class="nav-link" data-scroll-target="#syntactically-valid-names-in-r">Syntactically valid names in R</a></li>
  <li><a href="#object-names" id="toc-object-names" class="nav-link" data-scroll-target="#object-names">Object names</a></li>
  <li><a href="#function-names" id="toc-function-names" class="nav-link" data-scroll-target="#function-names">Function names</a></li>
  <li><a href="#variable-names" id="toc-variable-names" class="nav-link" data-scroll-target="#variable-names">Variable names</a></li>
  </ul></li>
  <li><a href="#readable-code" id="toc-readable-code" class="nav-link" data-scroll-target="#readable-code">Readable code</a>
  <ul class="collapse">
  <li><a href="#consistency-spacing" id="toc-consistency-spacing" class="nav-link" data-scroll-target="#consistency-spacing">Consistency spacing</a></li>
  <li><a href="#consistency-spacing-1" id="toc-consistency-spacing-1" class="nav-link" data-scroll-target="#consistency-spacing-1">Consistency spacing</a></li>
  <li><a href="#consistency-spacing-2" id="toc-consistency-spacing-2" class="nav-link" data-scroll-target="#consistency-spacing-2">Consistency spacing</a></li>
  <li><a href="#consistency-spacing-3" id="toc-consistency-spacing-3" class="nav-link" data-scroll-target="#consistency-spacing-3">Consistency spacing</a></li>
  <li><a href="#avoid-long-lines" id="toc-avoid-long-lines" class="nav-link" data-scroll-target="#avoid-long-lines">Avoid long lines</a></li>
  <li><a href="#sequence-of-functions" id="toc-sequence-of-functions" class="nav-link" data-scroll-target="#sequence-of-functions">Sequence of functions</a></li>
  <li><a href="#r-packages-for-styling-code" id="toc-r-packages-for-styling-code" class="nav-link" data-scroll-target="#r-packages-for-styling-code">R packages for styling code</a></li>
  </ul></li>
  <li><a href="#what-exactly-are-r-packages" id="toc-what-exactly-are-r-packages" class="nav-link" data-scroll-target="#what-exactly-are-r-packages">What exactly are <span style="color:yellow">R packages</span>?</a>
  <ul class="collapse">
  <li><a href="#r-packages-can-be-many-things" id="toc-r-packages-can-be-many-things" class="nav-link" data-scroll-target="#r-packages-can-be-many-things">R packages can be many things…</a></li>
  <li><a href="#the-anatomy-of-an-r-package" id="toc-the-anatomy-of-an-r-package" class="nav-link" data-scroll-target="#the-anatomy-of-an-r-package">The anatomy of an R package</a></li>
  <li><a href="#the-description-file" id="toc-the-description-file" class="nav-link" data-scroll-target="#the-description-file">The <code>DESCRIPTION</code> file</a></li>
  <li><a href="#example-dplyr-description-file" id="toc-example-dplyr-description-file" class="nav-link" data-scroll-target="#example-dplyr-description-file">Example: <code>dplyr</code> <code>DESCRIPTION</code> file</a></li>
  <li><a href="#the-r-directory" id="toc-the-r-directory" class="nav-link" data-scroll-target="#the-r-directory">The R/ directory</a></li>
  <li><a href="#the-namespace-file" id="toc-the-namespace-file" class="nav-link" data-scroll-target="#the-namespace-file">The <code>NAMESPACE</code> file</a></li>
  <li><a href="#creating-an-r-package" id="toc-creating-an-r-package" class="nav-link" data-scroll-target="#creating-an-r-package">Creating an R package</a></li>
  <li><a href="#adding-functions-to-an-r-package" id="toc-adding-functions-to-an-r-package" class="nav-link" data-scroll-target="#adding-functions-to-an-r-package">Adding functions to an R package</a></li>
  <li><a href="#distribute-data-via-an-r-package" id="toc-distribute-data-via-an-r-package" class="nav-link" data-scroll-target="#distribute-data-via-an-r-package">Distribute data via an R package</a></li>
  <li><a href="#launcing-shiny-app-via-an-r-package" id="toc-launcing-shiny-app-via-an-r-package" class="nav-link" data-scroll-target="#launcing-shiny-app-via-an-r-package">Launcing shiny app via an R package</a></li>
  <li><a href="#installing-the-package" id="toc-installing-the-package" class="nav-link" data-scroll-target="#installing-the-package">Installing the package</a></li>
  <li><a href="#master-the-keyboard-shortcuts" id="toc-master-the-keyboard-shortcuts" class="nav-link" data-scroll-target="#master-the-keyboard-shortcuts">Master the keyboard shortcuts</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture 8: Clearly communicating with code</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="aim" class="level2">
<h2 class="anchored" data-anchor-id="aim"></h2>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Aim
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Understand and formulate code for communication</li>
<li>Understand R package structure</li>
<li>Build R package with R code, data, and launching shiny apps</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Why
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Sharing code makes your analysis <strong>transparent</strong> and <strong>reproducible</strong> to others.</li>
<li>Writing code that is readable by others <em>make author intent <strong>explainable</strong></em></li>
<li>An R package makes functions, data or apps <strong>accessible</strong>, thereby increasing impact of your work</li>
</ul>
</div>
</div>
</section>
<section id="example-data" class="level2">
<h2 class="anchored" data-anchor-id="example-data">Example data</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Plant growth
</div>
</div>
<div class="callout-body-container callout-body">
<p>An experiment to compare yields under control and two different treatment conditions on plants</p>
<div class="cell" data-layout-align="center" data-hash="cache/unnamed-chunk-2_a4a9c86189171017610abe336a247e97">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(PlantGrowth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   30 obs. of  2 variables:
 $ weight: num  4.17 5.58 5.18 6.11 4.5 4.61 5.17 4.53 5.33 5.14 ...
 $ group : Factor w/ 3 levels "ctrl","trt1",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
</div>
</div>
</div>
<p>. . .</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tooth growth
</div>
</div>
<div class="callout-body-container callout-body">
<p>An experiment to study the effect of vitamin C on tooth growth in guinea pigs</p>
<div class="cell" data-layout-align="center" data-hash="cache/unnamed-chunk-3_b1f2f33680f9f45ecca380ed8c4c4547">
<div class="sourceCode cell-code" id="cb3" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ToothGrowth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   60 obs. of  3 variables:
 $ len : num  4.2 11.5 7.3 5.8 6.4 10 11.2 11.2 5.2 7 ...
 $ supp: Factor w/ 2 levels "OJ","VC": 2 2 2 2 2 2 2 2 2 2 ...
 $ dose: num  0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 ...</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="which-one-do-you-prefer" class="level2">
<h2 class="anchored" data-anchor-id="which-one-do-you-prefer">Which one do you prefer?</h2>
<p><strong>Code #1</strong></p>
<div class="cell" data-layout-align="center" data-hash="cache/unnamed-chunk-4_c832cba7d14c72b895e05c46870c6beb">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(PlantGrowth, <span class="fu">tapply</span>(weight, group, mean))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> ctrl  trt1  trt2 
5.032 4.661 5.526 </code></pre>
</div>
</div>
<p>. . .</p>
<p><strong>Code #2</strong></p>
<div class="cell" data-layout-align="center" data-hash="cache/unnamed-chunk-5_5c8cfafaa27e32a85eed6db79599231e">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>PlantGrowth <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">weight_avg =</span> <span class="fu">mean</span>(weight))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  group weight_avg
  &lt;fct&gt;      &lt;dbl&gt;
1 ctrl        5.03
2 trt1        4.66
3 trt2        5.53</code></pre>
</div>
</div>
</section>
<section id="what-do-you-expect-the-output-is" class="level2">
<h2 class="anchored" data-anchor-id="what-do-you-expect-the-output-is">What do you expect the output is?</h2>
<p><strong>Code #1</strong></p>
<div class="cell" data-layout-align="center" data-output-location="fragment" data-hash="cache/unnamed-chunk-6_bed89bcef2b5f07e41462cc731a88fb7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(ToothGrowth, <span class="fu">tapply</span>(len, <span class="fu">list</span>(supp, dose), mean))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     0.5     1     2
OJ 13.23 22.70 26.06
VC  7.98 16.77 26.14</code></pre>
</div>
</div>
<p>. . .</p>
<p><strong>Code #2</strong></p>
<div class="cell" data-layout-align="center" data-output-location="fragment" data-hash="cache/unnamed-chunk-7_4e04761c15fc1aa186781dba925f1f2f">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>ToothGrowth <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(supp, dose) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">length_avg =</span> <span class="fu">mean</span>(len))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
# Groups:   supp [2]
  supp   dose length_avg
  &lt;fct&gt; &lt;dbl&gt;      &lt;dbl&gt;
1 OJ      0.5      13.2 
2 OJ      1        22.7 
3 OJ      2        26.1 
4 VC      0.5       7.98
5 VC      1        16.8 
6 VC      2        26.1 </code></pre>
</div>
</div>
</section>
<section id="naming-matters" class="level1 page-columns page-full">
<h1>Naming matters</h1>
<section id="syntactic-sugar" class="level2">
<h2 class="anchored" data-anchor-id="syntactic-sugar">Syntactic sugar</h2>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Syntactic sugar</strong> means using function name or syntax in a programming language that is designed to make things <strong><em>easier to read or to express for humans</em></strong>.</p>
</div>
</div>
</div>
<p>. . .</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>. . .</p>
<p>What do you think this function is doing?</p>
<p>. . .</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compute_average</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>. . .</p>
<p><i class="fas fa-lightbulb"></i> A human reads your code, so write your function in a way that reads and works well for humans</p>
</section>
<section id="naming-cases" class="level2">
<h2 class="anchored" data-anchor-id="naming-cases">Naming cases</h2>
<div class="flex">
<div class="w-50 pr3">
<div class="fragment">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
camelCase
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Capitalise all words after first word.</li>
<li><strong>Common in R Shiny</strong> and JavaScript.</li>
</ul>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
snake_case
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>All words are lower case and separated by an underscore.</li>
<li><strong>Preferred by R programmers</strong> in general (except Shiny).</li>
</ul>
</div>
</div>
</div>
</div>
<div class="w-50 pl3">
<div class="fragment">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
PascalCase
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Capitalise all words.</li>
<li>Preferred by C programmers.</li>
</ul>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
kebab-case
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>All words are lower case and separated by a dash.</li>
<li>Common in HTML attribute names and CSS property names.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>. . .</p>
<p>Stick with the style convention of the language as much as possible!</p>
</section>
<section id="syntactically-valid-names-in-r" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="syntactically-valid-names-in-r">Syntactically valid names in R</h2>
<div class="incremental">
<ul class="incremental">
<li><p>In R, a <span class="monash-blue"><strong>syntactically valid name</strong></span> consists of letters, numbers and the dot or underline characters and starts with a letter or the dot not followed by a number.</p></li>
<li><p>It also cannot be a <strong>reserved word</strong>, e.g.&nbsp;<code>if</code>, <code>else</code>, <code>TRUE</code>, <code>FALSE</code>, <code>while</code>, <code>function</code>. For full list see <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Reserved.html"><code>?Reserved</code></a>.</p></li>
<li><p>Anything else is a <strong>non-syntactic name</strong> in R and you can still use any name in R by surrounding it with backticks:</p></li>
</ul>
<div class="fragment">
<div class="cell" data-layout-align="center" data-hash="cache/unnamed-chunk-8_790ce3e0b69a97460573e9efa6ae54f1">
<div class="sourceCode cell-code" id="cb15" data-code-line-numbers="false"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">4</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul class="incremental">
<li>You can use <code>make.names()</code> to make syntatically valid names in R.</li>
</ul>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Source: <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/make.names.html">R Manual</a></p>
</div></div></section>
<section id="object-names" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="object-names">Object names</h2>
<ul>
<li>Variable and function names should <strong>use only snake case</strong>.</li>
<li>Strive for names that are <strong>concise</strong> and <strong>meaningful</strong>.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>day_one
day_1</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>DayOne
dayone
first_day_of_the_month
djm1</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Source: <a href="https://style.tidyverse.org/package-files.html">The tidyverse style guide</a></p>
</div></div></section>
<section id="function-names" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="function-names">Function names</h2>
<ul>
<li>Function names should be <strong>verbs</strong> (with exceptions).</li>
<li>Avoid using <code>.</code> in the names…</li>
<li>…unless writing a function method for S3 object system.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>add_row()
permute()
add_column()</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>row_adder()
permutation()
add.column()</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Source: <a href="https://style.tidyverse.org/">The tidyverse style guide</a></p>
</div></div></section>
<section id="variable-names" class="level2">
<h2 class="anchored" data-anchor-id="variable-names">Variable names</h2>
<ul>
<li>Variable names should be <strong>nouns</strong>.</li>
<li>Consider using a list or data.frame to group variables in a similar context instead of assigning it as separate objects.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>origin
fit</code></pre>
<div class="monash-black f3 nonincremental">
<p>where</p>
<ul>
<li><code>fit[[1]] = fit1</code>,</li>
<li><code>fit[[2]] = fit2</code>,</li>
<li>and so on.</li>
</ul>
</div>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>originate
fit1
fit2
fit3
fit4
fit5</code></pre>
</div>
</div>
</section>
</section>
<section id="readable-code" class="level1 page-columns page-full" data-background-color="#006DAE">
<h1 data-background-color="#006DAE">Readable code</h1>
<p>. . .</p>
<p><span class="f1" style="color:yellow;">Consistency</span> is key!</p>
<section id="consistency-spacing" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="consistency-spacing">Consistency spacing</h2>
<ul>
<li>Always put a space after a comma, never before.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>x[, 1]</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>x[,1]
x[ ,1]
x[ , 1]</code></pre>
</div>
</div>
<ul>
<li>Do not put spaces inside or outside parentheses for regular function calls.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>mean(x, na.rm = TRUE)</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>mean (x, na.rm = TRUE)
mean( x, na.rm = TRUE )</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Source: <a href="https://style.tidyverse.org/">The tidyverse style guide</a></p>
</div></div></section>
<section id="consistency-spacing-1" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="consistency-spacing-1">Consistency spacing</h2>
<ul>
<li>Place a space before and after <code>()</code> when used with <code>if</code>, <code>for</code>, or <code>while</code>.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>if (debug) {
  show(x)
}</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>if(debug){
  show(x)
}</code></pre>
</div>
</div>
<ul>
<li>Place a space after <code>()</code> (but not before) used for function arguments:</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>function(x) {}</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>function (x) {}
function(x){}</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Source: <a href="https://style.tidyverse.org/">The tidyverse style guide</a></p>
</div></div></section>
<section id="consistency-spacing-2" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="consistency-spacing-2">Consistency spacing</h2>
<ul>
<li>Most infix operators (<code>+</code>, <code>-</code>, <code>&lt;-</code>, etc.) should be surrounded by spaces…</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>height &lt;- (feet * 12) + inches
mean(x, na.rm = TRUE)</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>height&lt;-feet*12+inches
mean(x, na.rm=TRUE)</code></pre>
</div>
</div>
<ul>
<li>…with exceptions of operators with high precedence (<code>::</code>, <code>:::</code>, <code>$</code>, <code>@</code>, <code>[</code>, <code>[[</code>, <code>^</code>, unary <code>-</code>, unary <code>+</code>, and <code>:</code>).</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>sqrt(x^2 + y^2)
df$z
x &lt;- 1:10</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>sqrt(x ^ 2 + y ^ 2)
df $ z
x &lt;- 1 : 10</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Source: <a href="https://style.tidyverse.org/">The tidyverse style guide</a></p>
</div></div></section>
<section id="consistency-spacing-3" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="consistency-spacing-3">Consistency spacing</h2>
<ul>
<li>… with exceptions of single-sided formulas when the right-hand side is a single identifier.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>~foo
tribble(
  ~col1, ~col2,
  "a",   "b"
)</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>~ foo
tribble(
  ~ col1, ~ col2,
  "a", "b"
)</code></pre>
</div>
</div>
<ul>
<li>Single-sided formulas with a complex right-hand side do need a space.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>~ x + y</code></pre>
</div>
<div class="w-50 monash-red2 pr3">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>~x + y</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Source: <a href="https://style.tidyverse.org/">The tidyverse style guide</a></p>
</div></div></section>
<section id="avoid-long-lines" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="avoid-long-lines">Avoid long lines</h2>
<ul>
<li>Limit your code to 80 characters per line.</li>
<li>If the arguments to a function don’t all fit on one line, put each argument on its own line and indent.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>do_something_very_complicated(
  something = "that",
  requires = many,
  arguments = "some of which may be long"
)</code></pre>
</div>
<div class="w-50 monash-red2">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>do_something_very_complicated("that", requires, many, arguments, "some of which may be long")</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Source: <a href="https://style.tidyverse.org/">The tidyverse style guide</a></p>
</div></div></section>
<section id="sequence-of-functions" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sequence-of-functions">Sequence of functions</h2>
<ul>
<li>Avoid deeply nesting functions in one line.</li>
<li><code>%&gt;%</code> should always have a space before it, and should usually be followed by a new line.</li>
<li>After the first step, each line should be indented by two spaces.</li>
</ul>
<p>. . .</p>
<div class="flex">
<div class="w-50 monash-green2 pl3">
<p>Good <i class="fa-solid fa-circle-check"></i></p>
<pre><code>shopping_list %&gt;% 
  buy() %&gt;% 
  prepare() %&gt;% 
  cook()</code></pre>
</div>
<div class="w-50 monash-red2">
<p>Bad <i class="fa-solid fa-circle-xmark"></i></p>
<pre><code>cook(prepare(buy(shopping_list)))

shopping_list %&gt;% buy() %&gt;% 
  prepare() %&gt;% cook()</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Source: <a href="https://style.tidyverse.org/">The tidyverse style guide</a></p>
</div></div></section>
<section id="r-packages-for-styling-code" class="level2">
<h2 class="anchored" data-anchor-id="r-packages-for-styling-code">R packages for styling code</h2>
<ul>
<li><code>styler</code> allows you to interactively restyle selected text, files, or entire projects.</li>
<li><code>styler</code> includes an RStudio add-in, the easiest way to re-style existing code.</li>
<li><code>lintr</code> performs automated checks to confirm that you conform to the style guide.</li>
</ul>
</section>
</section>
<section id="what-exactly-are-r-packages" class="level1" data-background-color="#006DAE">
<h1 data-background-color="#006DAE">What exactly are <span style="color:yellow">R packages</span>?</h1>
<section id="r-packages-can-be-many-things" class="level2">
<h2 class="anchored" data-anchor-id="r-packages-can-be-many-things">R packages can be many things…</h2>
<p>A container:</p>
<ul>
<li>for a set of R functions,</li>
<li>to share data,</li>
<li>to share an app,</li>
<li>and more, e.g.&nbsp;Rmd templates (out of scope for this unit).</li>
</ul>
</section>
<section id="the-anatomy-of-an-r-package" class="level2">
<h2 class="anchored" data-anchor-id="the-anatomy-of-an-r-package">The anatomy of an R package</h2>
<ul>
<li><code>DESCRIPTION</code> file</li>
<li><code>R/</code> directory for R files that contain your functions</li>
<li><code>NAMESPACE</code> file (manual creation is out of scope for this unit)</li>
</ul>
<p>. . .</p>
<p>Optionally,</p>
<ul>
<li><code>data/</code>: for binary data available to the user</li>
<li><code>data-raw/</code>: for raw data</li>
<li><code>inst/</code>: for arbitrary additional files that you want include in your package.</li>
<li>and others.</li>
</ul>
</section>
<section id="the-description-file" class="level2">
<h2 class="anchored" data-anchor-id="the-description-file">The <code>DESCRIPTION</code> file</h2>
<p>Metadata for the package</p>
<ul>
<li>Package name</li>
<li>Title and description of what the package does</li>
<li>Authors<br>
</li>
<li>Dependencies (depends, imports and suggests)</li>
<li>Licencing</li>
<li>Version number</li>
<li>Where to report bugs and so on</li>
</ul>
</section>
<section id="example-dplyr-description-file" class="level2">
<h2 class="anchored" data-anchor-id="example-dplyr-description-file">Example: <code>dplyr</code> <code>DESCRIPTION</code> file</h2>
<div class="cell" data-layout-align="center" data-hash="cache/unnamed-chunk-9_323da4b493403c8191942c0708dcd77b">
<pre><code>Type: Package
Package: dplyr
Title: A Grammar of Data Manipulation
Version: 1.1.3.9000
Authors@R: c(
    person("Hadley", "Wickham", , "hadley@posit.co", role = c("aut", "cre"),
           comment = c(ORCID = "0000-0003-4757-117X")),
    person("Romain", "François", role = "aut",
           comment = c(ORCID = "0000-0002-2444-4226")),
    person("Lionel", "Henry", role = "aut"),
    person("Kirill", "Müller", role = "aut",
           comment = c(ORCID = "0000-0002-1416-3412")),
    person("Davis", "Vaughan", , "davis@posit.co", role = "aut",
           comment = c(ORCID = "0000-0003-4777-038X")),
    person("Posit Software, PBC", role = c("cph", "fnd"))
  )
Description: A fast, consistent tool for working with data frame like
    objects, both in memory and out of memory.
License: MIT + file LICENSE
URL: https://dplyr.tidyverse.org, https://github.com/tidyverse/dplyr
BugReports: https://github.com/tidyverse/dplyr/issues
Depends: 
    R (&gt;= 3.5.0)
Imports: 
    cli (&gt;= 3.4.0),
    generics,
    glue (&gt;= 1.3.2),
    lifecycle (&gt;= 1.0.3),
    magrittr (&gt;= 1.5),
    methods,
    pillar (&gt;= 1.9.0),
    R6,
    rlang (&gt;= 1.1.0),
    tibble (&gt;= 3.2.0),
    tidyselect (&gt;= 1.2.0),
    utils,
    vctrs (&gt;= 0.6.0)
Suggests: 
    bench,
    broom,
    callr,
    covr,
    DBI,
    dbplyr (&gt;= 2.2.1),
    ggplot2,
    knitr,
    Lahman,
    lobstr,
    microbenchmark,
    nycflights13,
    purrr,
    rmarkdown,
    RMySQL,
    RPostgreSQL,
    RSQLite,
    stringi (&gt;= 1.7.6),
    testthat (&gt;= 3.1.5),
    tidyr (&gt;= 1.3.0),
    withr
VignetteBuilder: 
    knitr
Config/Needs/website: tidyverse, shiny, pkgdown, tidyverse/tidytemplate
Config/testthat/edition: 3
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.2.3</code></pre>
</div>
</section>
<section id="the-r-directory" class="level2">
<h2 class="anchored" data-anchor-id="the-r-directory">The R/ directory</h2>
<ul>
<li>The functions you create are stored as R scripts that live in the R/ directory.</li>
<li>Functions can be internal to the package or exported so other users have access to them.</li>
<li>See for example the <a href="https://github.com/tidyverse/dplyr/tree/main/R"><code>dplyr</code> R directory</a>.</li>
</ul>
</section>
<section id="the-namespace-file" class="level2">
<h2 class="anchored" data-anchor-id="the-namespace-file">The <code>NAMESPACE</code> file</h2>
<ul>
<li>The file contains a directive that describes whether an R object is exported from this package or imported from others.</li>
<li>These directives can be automatically created by <code>roxygen2</code> (covered next lecture).</li>
</ul>
<p>. . .</p>
<div class="cell" data-layout-align="center" data-hash="cache/unnamed-chunk-10_2dae5c3df0b3a0f4a7f6420e344ce21c">
<pre><code># Generated by roxygen2: do not edit by hand

S3method("$&lt;-",grouped_df)
S3method("[",fun_list)
S3method("[",grouped_df)
S3method("[",rowwise_df)
S3method("[&lt;-",grouped_df)
S3method("[&lt;-",rowwise_df)
S3method("[[&lt;-",grouped_df)
S3method("names&lt;-",grouped_df)
S3method("names&lt;-",rowwise_df)
S3method(add_count,data.frame)
S3method(add_count,default)
S3method(anti_join,data.frame)
S3method(arrange,data.frame)
S3method(arrange_,data.frame)
S3method(arrange_,tbl_df)
S3method(as.data.frame,grouped_df)
S3method(as.tbl,data.frame)
S3method(as.tbl,tbl)
S3method(as_join_by,character)
S3method(as_join_by,default)
S3method(as_join_by,dplyr_join_by)
S3method(as_join_by,list)
S3method(as_tibble,grouped_df)
S3method(as_tibble,rowwise_df)
S3method(auto_copy,data.frame)
S3method(cbind,grouped_df)
S3method(collapse,data.frame)
S3method(collect,data.frame)
S3method(common_by,"NULL")
S3method(common_by,character)
S3method(common_by,default)
S3method(common_by,list)
S3method(compute,data.frame)
S3method(copy_to,DBIConnection)
S3method(copy_to,src_local)
S3method(count,data.frame)
S3method(cross_join,data.frame)
S3method(distinct,data.frame)
S3method(distinct_,data.frame)
S3method(distinct_,grouped_df)
S3method(distinct_,tbl_df)
S3method(do,"NULL")
S3method(do,data.frame)
S3method(do,grouped_df)
S3method(do,rowwise_df)
S3method(do_,"NULL")
S3method(do_,data.frame)
S3method(do_,grouped_df)
S3method(do_,rowwise_df)
S3method(dplyr_col_modify,data.frame)
S3method(dplyr_col_modify,grouped_df)
S3method(dplyr_col_modify,rowwise_df)
S3method(dplyr_reconstruct,data.frame)
S3method(dplyr_reconstruct,grouped_df)
S3method(dplyr_reconstruct,rowwise_df)
S3method(dplyr_row_slice,data.frame)
S3method(dplyr_row_slice,grouped_df)
S3method(dplyr_row_slice,rowwise_df)
S3method(filter,data.frame)
S3method(filter,ts)
S3method(filter_,data.frame)
S3method(filter_,tbl_df)
S3method(filter_bullets,"dplyr:::filter_incompatible_size")
S3method(filter_bullets,"dplyr:::filter_incompatible_type")
S3method(format,src_local)
S3method(full_join,data.frame)
S3method(group_by,data.frame)
S3method(group_by_,data.frame)
S3method(group_by_,rowwise_df)
S3method(group_by_drop_default,default)
S3method(group_by_drop_default,grouped_df)
S3method(group_data,data.frame)
S3method(group_data,grouped_df)
S3method(group_data,rowwise_df)
S3method(group_data,tbl_df)
S3method(group_indices,data.frame)
S3method(group_indices_,data.frame)
S3method(group_indices_,grouped_df)
S3method(group_indices_,rowwise_df)
S3method(group_keys,data.frame)
S3method(group_map,data.frame)
S3method(group_modify,data.frame)
S3method(group_modify,grouped_df)
S3method(group_nest,data.frame)
S3method(group_nest,grouped_df)
S3method(group_size,data.frame)
S3method(group_split,data.frame)
S3method(group_split,grouped_df)
S3method(group_split,rowwise_df)
S3method(group_trim,data.frame)
S3method(group_trim,grouped_df)
S3method(group_vars,data.frame)
S3method(groups,data.frame)
S3method(inner_join,data.frame)
S3method(intersect,data.frame)
S3method(left_join,data.frame)
S3method(mutate,data.frame)
S3method(mutate_,data.frame)
S3method(mutate_,tbl_df)
S3method(mutate_bullets,"dplyr:::error_incompatible_combine")
S3method(mutate_bullets,"dplyr:::mutate_constant_recycle_error")
S3method(mutate_bullets,"dplyr:::mutate_incompatible_size")
S3method(mutate_bullets,"dplyr:::mutate_mixed_null")
S3method(mutate_bullets,"dplyr:::mutate_not_vector")
S3method(n_groups,data.frame)
S3method(nest_by,data.frame)
S3method(nest_by,grouped_df)
S3method(nest_join,data.frame)
S3method(print,all_vars)
S3method(print,any_vars)
S3method(print,dplyr_join_by)
S3method(print,dplyr_sel_vars)
S3method(print,fun_list)
S3method(print,last_dplyr_warnings)
S3method(print,src)
S3method(pull,data.frame)
S3method(rbind,grouped_df)
S3method(recode,character)
S3method(recode,factor)
S3method(recode,numeric)
S3method(reframe,data.frame)
S3method(relocate,data.frame)
S3method(rename,data.frame)
S3method(rename_,data.frame)
S3method(rename_,grouped_df)
S3method(rename_with,data.frame)
S3method(right_join,data.frame)
S3method(rows_append,data.frame)
S3method(rows_delete,data.frame)
S3method(rows_insert,data.frame)
S3method(rows_patch,data.frame)
S3method(rows_update,data.frame)
S3method(rows_upsert,data.frame)
S3method(rowwise,data.frame)
S3method(rowwise,grouped_df)
S3method(same_src,data.frame)
S3method(sample_frac,data.frame)
S3method(sample_frac,default)
S3method(sample_n,data.frame)
S3method(sample_n,default)
S3method(select,data.frame)
S3method(select,list)
S3method(select_,data.frame)
S3method(select_,grouped_df)
S3method(semi_join,data.frame)
S3method(setdiff,data.frame)
S3method(setequal,data.frame)
S3method(slice,data.frame)
S3method(slice_,data.frame)
S3method(slice_,tbl_df)
S3method(slice_head,data.frame)
S3method(slice_max,data.frame)
S3method(slice_min,data.frame)
S3method(slice_sample,data.frame)
S3method(slice_tail,data.frame)
S3method(src_tbls,src_local)
S3method(summarise,data.frame)
S3method(summarise,grouped_df)
S3method(summarise,rowwise_df)
S3method(summarise_,data.frame)
S3method(summarise_,tbl_df)
S3method(summarise_bullets,"dplyr:::summarise_incompatible_size")
S3method(summarise_bullets,"dplyr:::summarise_mixed_null")
S3method(summarise_bullets,"dplyr:::summarise_unsupported_type")
S3method(symdiff,data.frame)
S3method(symdiff,default)
S3method(tally,data.frame)
S3method(tbl,DBIConnection)
S3method(tbl,src_local)
S3method(tbl_ptype,default)
S3method(tbl_sum,grouped_df)
S3method(tbl_sum,rowwise_df)
S3method(tbl_vars,data.frame)
S3method(transmute,data.frame)
S3method(transmute_,data.frame)
S3method(ungroup,data.frame)
S3method(ungroup,grouped_df)
S3method(ungroup,rowwise_df)
S3method(union,data.frame)
S3method(union_all,data.frame)
S3method(union_all,default)
export("%&gt;%")
export(.data)
export(across)
export(add_count)
export(add_count_)
export(add_row)
export(add_rownames)
export(add_tally)
export(add_tally_)
export(all_equal)
export(all_of)
export(all_vars)
export(anti_join)
export(any_of)
export(any_vars)
export(arrange)
export(arrange_)
export(arrange_all)
export(arrange_at)
export(arrange_if)
export(as.tbl)
export(as_data_frame)
export(as_label)
export(as_tibble)
export(auto_copy)
export(bench_tbls)
export(between)
export(bind_cols)
export(bind_rows)
export(c_across)
export(case_match)
export(case_when)
export(changes)
export(check_dbplyr)
export(coalesce)
export(collapse)
export(collect)
export(combine)
export(common_by)
export(compare_tbls)
export(compare_tbls2)
export(compute)
export(consecutive_id)
export(contains)
export(copy_to)
export(count)
export(count_)
export(cross_join)
export(cumall)
export(cumany)
export(cume_dist)
export(cummean)
export(cur_column)
export(cur_data)
export(cur_data_all)
export(cur_group)
export(cur_group_id)
export(cur_group_rows)
export(current_vars)
export(data_frame)
export(db_analyze)
export(db_begin)
export(db_commit)
export(db_create_index)
export(db_create_indexes)
export(db_create_table)
export(db_data_type)
export(db_desc)
export(db_drop_table)
export(db_explain)
export(db_has_table)
export(db_insert_into)
export(db_list_tables)
export(db_query_fields)
export(db_query_rows)
export(db_rollback)
export(db_save_query)
export(db_write_table)
export(dense_rank)
export(desc)
export(dim_desc)
export(distinct)
export(distinct_)
export(distinct_all)
export(distinct_at)
export(distinct_if)
export(distinct_prepare)
export(do)
export(do_)
export(dplyr_col_modify)
export(dplyr_reconstruct)
export(dplyr_row_slice)
export(ends_with)
export(enexpr)
export(enexprs)
export(enquo)
export(enquos)
export(ensym)
export(ensyms)
export(eval_tbls)
export(eval_tbls2)
export(everything)
export(explain)
export(expr)
export(failwith)
export(filter)
export(filter_)
export(filter_all)
export(filter_at)
export(filter_if)
export(first)
export(full_join)
export(funs)
export(funs_)
export(glimpse)
export(group_by)
export(group_by_)
export(group_by_all)
export(group_by_at)
export(group_by_drop_default)
export(group_by_if)
export(group_by_prepare)
export(group_cols)
export(group_data)
export(group_indices)
export(group_indices_)
export(group_keys)
export(group_map)
export(group_modify)
export(group_nest)
export(group_rows)
export(group_size)
export(group_split)
export(group_trim)
export(group_vars)
export(group_walk)
export(grouped_df)
export(groups)
export(id)
export(ident)
export(if_all)
export(if_any)
export(if_else)
export(inner_join)
export(intersect)
export(is.grouped_df)
export(is.src)
export(is.tbl)
export(is_grouped_df)
export(join_by)
export(lag)
export(last)
export(last_col)
export(last_dplyr_warnings)
export(lead)
export(left_join)
export(location)
export(lst)
export(make_tbl)
export(matches)
export(min_rank)
export(mutate)
export(mutate_)
export(mutate_all)
export(mutate_at)
export(mutate_each)
export(mutate_each_)
export(mutate_if)
export(n)
export(n_distinct)
export(n_groups)
export(na_if)
export(near)
export(nest_by)
export(nest_join)
export(new_grouped_df)
export(new_rowwise_df)
export(nth)
export(ntile)
export(num_range)
export(one_of)
export(order_by)
export(percent_rank)
export(pick)
export(progress_estimated)
export(pull)
export(quo)
export(quo_name)
export(quos)
export(recode)
export(recode_factor)
export(reframe)
export(relocate)
export(rename)
export(rename_)
export(rename_all)
export(rename_at)
export(rename_if)
export(rename_vars)
export(rename_vars_)
export(rename_with)
export(right_join)
export(row_number)
export(rows_append)
export(rows_delete)
export(rows_insert)
export(rows_patch)
export(rows_update)
export(rows_upsert)
export(rowwise)
export(same_src)
export(sample_frac)
export(sample_n)
export(select)
export(select_)
export(select_all)
export(select_at)
export(select_if)
export(select_var)
export(select_vars)
export(select_vars_)
export(semi_join)
export(setdiff)
export(setequal)
export(show_query)
export(slice)
export(slice_)
export(slice_head)
export(slice_max)
export(slice_min)
export(slice_sample)
export(slice_tail)
export(sql)
export(sql_escape_ident)
export(sql_escape_string)
export(sql_join)
export(sql_select)
export(sql_semi_join)
export(sql_set_op)
export(sql_subquery)
export(sql_translate_env)
export(src)
export(src_df)
export(src_local)
export(src_mysql)
export(src_postgres)
export(src_sqlite)
export(src_tbls)
export(starts_with)
export(summarise)
export(summarise_)
export(summarise_all)
export(summarise_at)
export(summarise_each)
export(summarise_each_)
export(summarise_if)
export(summarize)
export(summarize_)
export(summarize_all)
export(summarize_at)
export(summarize_each)
export(summarize_each_)
export(summarize_if)
export(sym)
export(symdiff)
export(syms)
export(tally)
export(tally_)
export(tbl)
export(tbl_df)
export(tbl_nongroup_vars)
export(tbl_ptype)
export(tbl_vars)
export(tibble)
export(top_frac)
export(top_n)
export(transmute)
export(transmute_)
export(transmute_all)
export(transmute_at)
export(transmute_if)
export(tribble)
export(type_sum)
export(ungroup)
export(union)
export(union_all)
export(validate_grouped_df)
export(validate_rowwise_df)
export(vars)
export(where)
export(with_groups)
export(with_order)
export(wrap_dbplyr_obj)
import(rlang)
import(vctrs, except = data_frame)
importFrom(R6,R6Class)
importFrom(generics,intersect)
importFrom(generics,setdiff)
importFrom(generics,setequal)
importFrom(generics,union)
importFrom(glue,glue)
importFrom(glue,glue_collapse)
importFrom(glue,glue_data)
importFrom(lifecycle,deprecated)
importFrom(magrittr,"%&gt;%")
importFrom(methods,setOldClass)
importFrom(pillar,glimpse)
importFrom(pillar,tbl_sum)
importFrom(pillar,type_sum)
importFrom(stats,setNames)
importFrom(stats,update)
importFrom(tibble,add_row)
importFrom(tibble,as_data_frame)
importFrom(tibble,as_tibble)
importFrom(tibble,data_frame)
importFrom(tibble,is_tibble)
importFrom(tibble,lst)
importFrom(tibble,new_tibble)
importFrom(tibble,tibble)
importFrom(tibble,tribble)
importFrom(tibble,view)
importFrom(tidyselect,all_of)
importFrom(tidyselect,any_of)
importFrom(tidyselect,contains)
importFrom(tidyselect,ends_with)
importFrom(tidyselect,everything)
importFrom(tidyselect,last_col)
importFrom(tidyselect,matches)
importFrom(tidyselect,num_range)
importFrom(tidyselect,one_of)
importFrom(tidyselect,starts_with)
importFrom(tidyselect,where)
importFrom(utils,head)
importFrom(utils,tail)
useDynLib(dplyr, .registration = TRUE)</code></pre>
</div>
</section>
<section id="creating-an-r-package" class="level2">
<h2 class="anchored" data-anchor-id="creating-an-r-package">Creating an R package</h2>
<ul>
<li><code>usethis::create_package("mypkg")</code> for creating a skeleton R package</li>
<li>Add things to your R package</li>
<li><code>devtools::load_all()</code> for loading the functions in the R/ directory to the current environment</li>
</ul>
</section>
<section id="adding-functions-to-an-r-package" class="level2">
<h2 class="anchored" data-anchor-id="adding-functions-to-an-r-package">Adding functions to an R package</h2>
<ul>
<li><code>usethis::use_r("new-r-file")</code> for creating a new R file in the R/ directory</li>
</ul>
<p>. . .</p>
<pre><code>- mypackage
  |- R
     |- new-r-file.R
     |- ...
  |- DESCRIPTION
  |- ...</code></pre>
</section>
<section id="distribute-data-via-an-r-package" class="level2">
<h2 class="anchored" data-anchor-id="distribute-data-via-an-r-package">Distribute data via an R package</h2>
<ul>
<li><code>usethis::use_data_raw("filename")</code> for adding a file to data-raw/ directory to include code to reproduce data.</li>
<li><code>usethis::use_data(mydata)</code> for creating a binary data file in data/ directory.</li>
<li>More information on this at <a href="https://r-pkgs.org/data.html">R Packages (2e) Chapter 8 Data</a>.</li>
</ul>
</section>
<section id="launcing-shiny-app-via-an-r-package" class="level2">
<h2 class="anchored" data-anchor-id="launcing-shiny-app-via-an-r-package">Launcing shiny app via an R package</h2>
<pre><code>- mypackage
  |- inst
     |- myapp
        |- app.R
  |- R
     |- run-app.R
     |- ...
  |- DESCRIPTION
  |- ...</code></pre>
<p><code>run-app.R</code></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' @export</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>run_app <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  app_dir <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"myapp"</span>, <span class="at">package =</span> <span class="st">"mypackage"</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  shiny<span class="sc">::</span><span class="fu">runApp</span>(app_dir, <span class="at">display.mode =</span> <span class="st">"normal"</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note: for this to work, you need to first install the package!</p>
</section>
<section id="installing-the-package" class="level2">
<h2 class="anchored" data-anchor-id="installing-the-package">Installing the package</h2>
<ul>
<li>First run <code>devtools::document()</code><br>(we will cover this more next lecture).</li>
<li>Then run <code>devtools::install()</code>.</li>
<li>Now you can call <code>library(mypackage)</code> to use exported functions or data in your package!</li>
</ul>
</section>
<section id="master-the-keyboard-shortcuts" class="level2">
<h2 class="anchored" data-anchor-id="master-the-keyboard-shortcuts">Master the keyboard shortcuts</h2>
<div class="nonincremental">
<ul>
<li><strong>Cmd</strong>/<strong>Ctrl</strong> + <strong>Shift</strong> + <strong>L</strong>: Load all</li>
<li><strong>Cmd</strong>/<strong>Ctrl</strong> + <strong>Shift</strong> + <strong>D</strong>: Document</li>
<li><strong>Cmd</strong>/<strong>Ctrl</strong> + <strong>Shift</strong> + <strong>B</strong>: Build and Reload</li>
<li>plus more… see <strong>RStudio IDE</strong> &gt; <strong>Tools</strong> &gt; <strong>Keyboard Shortcuts Help</strong></li>
</ul>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Summary
</div>
</div>
<div class="callout-body-container callout-body">
<div class="nonincremental">
<ul>
<li>How to enhance communication in code by adopting a consistent styling.</li>
<li>R packages are flexible containers to share R code, data, and app amongst other things.</li>
<li>An R package can be set up, documented, and tried out with <code>usethis</code> and <code>devtools</code>.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Resources
</div>
</div>
<div class="callout-body-container callout-body">
<div class="nonincremental">
<ul>
<li><a href="https://besjournals.onlinelibrary.wiley.com/doi/10.1111/2041-210X.13961">Filazzola &amp; Lortie (2022) A call for clean code to effectively communicate science</a></li>
<li><a href="https://r-pkgs.org">R Packages 2nd edition</a> by Hadley Wickham and Jenny Bryan</li>
</ul>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>